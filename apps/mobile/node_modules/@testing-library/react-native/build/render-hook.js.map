{"version":3,"file":"render-hook.js","names":["React","_interopRequireWildcard","require","_render","_interopRequireDefault","_renderAsync","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","renderHook","hookToRender","options","result","createRef","HookContainer","hookProps","renderResult","useEffect","current","initialProps","renderOptions","rerender","rerenderComponent","unmount","render","createElement","renderHookAsync","TestComponent","rerenderAsync","rerenderComponentAsync","unmountAsync","renderAsync"],"sources":["../src/render-hook.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport render from './render';\nimport renderAsync from './render-async';\nimport type { RefObject } from './types';\n\nexport type RenderHookResult<Result, Props> = {\n  result: RefObject<Result>;\n  rerender: (props: Props) => void;\n  unmount: () => void;\n};\n\nexport type RenderHookAsyncResult<Result, Props> = {\n  result: RefObject<Result>;\n  rerenderAsync: (props: Props) => Promise<void>;\n  unmountAsync: () => Promise<void>;\n};\n\nexport type RenderHookOptions<Props> = {\n  /**\n   * The initial props to pass to the hook.\n   */\n  initialProps?: Props;\n\n  /**\n   * Pass a React Component as the wrapper option to have it rendered around the inner element. This is most useful for creating\n   * reusable custom render functions for common data providers.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  wrapper?: React.ComponentType<any>;\n\n  /**\n   * Set to `false` to disable concurrent rendering.\n   * Otherwise `renderHook` will default to concurrent rendering.\n   */\n  concurrentRoot?: boolean;\n};\n\nexport function renderHook<Result, Props>(\n  hookToRender: (props: Props) => Result,\n  options?: RenderHookOptions<NoInfer<Props>>,\n): RenderHookResult<Result, Props> {\n  const result = React.createRef<Result>() as RefObject<Result>;\n\n  function HookContainer({ hookProps }: { hookProps: Props }) {\n    const renderResult = hookToRender(hookProps);\n    React.useEffect(() => {\n      result.current = renderResult;\n    });\n\n    return null;\n  }\n\n  const { initialProps, ...renderOptions } = options ?? {};\n  const { rerender: rerenderComponent, unmount } = render(\n    // @ts-expect-error since option can be undefined, initialProps can be undefined when it should'nt\n    <HookContainer hookProps={initialProps} />,\n    renderOptions,\n  );\n\n  return {\n    result: result,\n    rerender: (hookProps: Props) => rerenderComponent(<HookContainer hookProps={hookProps} />),\n    unmount,\n  };\n}\n\nexport async function renderHookAsync<Result, Props>(\n  hookToRender: (props: Props) => Result,\n  options?: RenderHookOptions<NoInfer<Props>>,\n): Promise<RenderHookAsyncResult<Result, Props>> {\n  const result = React.createRef<Result>() as RefObject<Result>;\n\n  function TestComponent({ hookProps }: { hookProps: Props }) {\n    const renderResult = hookToRender(hookProps);\n    React.useEffect(() => {\n      result.current = renderResult;\n    });\n\n    return null;\n  }\n\n  const { initialProps, ...renderOptions } = options ?? {};\n  const { rerenderAsync: rerenderComponentAsync, unmountAsync } = await renderAsync(\n    // @ts-expect-error since option can be undefined, initialProps can be undefined when it should'nt\n    <TestComponent hookProps={initialProps} />,\n    renderOptions,\n  );\n\n  return {\n    result: result,\n    rerenderAsync: (hookProps: Props) =>\n      rerenderComponentAsync(<TestComponent hookProps={hookProps} />),\n    unmountAsync,\n  };\n}\n"],"mappings":"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","ignoreList":[]}